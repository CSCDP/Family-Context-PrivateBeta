{"ast":null,"code":"import _objectSpread from \"/Users/matthewpugh/Projects/family-context-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/Users/matthewpugh/Projects/family-context-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matthewpugh/Projects/family-context-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/matthewpugh/Projects/family-context-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/matthewpugh/Projects/family-context-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/matthewpugh/Projects/family-context-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/matthewpugh/Projects/family-context-ui/src/pages/LoginPage.tsx\";\nimport React from 'react';\nimport { TextInputGroup, PasswordInputGroup } from '../components/InputGroups';\nimport LoginWarning from '../components/LoginWarning';\nimport LoginStatus from '../models/LoginStatus';\nimport ErrorMessage from '../components/ErrorMessage';\nimport { Urls } from '../tools/ConfigurableContent';\n\nvar LoginPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(LoginPage, _React$Component);\n\n  function LoginPage(props) {\n    var _this;\n\n    _classCallCheck(this, LoginPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginPage).call(this, props));\n    _this.state = {\n      loginStatus: LoginStatus.Unknown,\n      userid: \"\",\n      password: \"\",\n      validationError: false\n    };\n    return _this;\n  }\n\n  _createClass(LoginPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"form\", {\n        className: \"LoginPage \" + (this.state.validationError ? \"govuk-form-group--error\" : \"\"),\n        onSubmit: function onSubmit(event) {\n          return _this2.tryLogin(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }, React.createElement(ErrorMessage, {\n        hidden: !this.state.validationError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }, \"Enter your username and password\"), React.createElement(TextInputGroup, {\n        onChange: function onChange(text) {\n          return _this2.setState(_objectSpread({}, _this2.state, {\n            userid: text\n          }));\n        },\n        id: \"username\",\n        name: \"Username\",\n        format: \"govuk-!-width-one-quarter \" + (this.state.validationError ? \"govuk-input--error\" : \"\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }), React.createElement(PasswordInputGroup, {\n        onChange: function onChange(text) {\n          return _this2.setState(_objectSpread({}, _this2.state, {\n            password: text\n          }));\n        },\n        format: this.state.validationError ? \"govuk-input--error\" : \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }), React.createElement(LoginWarning, {\n        show: this.state.loginStatus === LoginStatus.Unauthenticated,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, \"Username or password is incorrect\"), React.createElement(LoginWarning, {\n        show: this.state.loginStatus === LoginStatus.Forbidden,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, \"You\\u2019re not permitted to login. Please talk to an administrator\"), React.createElement(\"button\", {\n        className: \"govuk-button\",\n        \"data-module\": \"govuk-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, \"Start session\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, Urls.Links.LoginHelp ? React.createElement(\"a\", {\n        href: Urls.Links.LoginHelp,\n        rel: \"noopener noreferrer\",\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"I need help signing in\") : React.createElement(React.Fragment, null)));\n    }\n  }, {\n    key: \"tryLogin\",\n    value: function tryLogin(formEvent) {\n      var _this3 = this;\n\n      formEvent.preventDefault();\n\n      if (this.state.userid == \"\" || this.state.password == \"\") {\n        this.setState(_objectSpread({}, this.state, {\n          validationError: true\n        }));\n      } else {\n        this.setState(_objectSpread({}, this.state, {\n          validationError: false\n        }));\n        this.props.client.login(this.state).then(function (status) {\n          return _this3.setState(_objectSpread({}, _this3.state, {\n            loginStatus: status\n          }));\n        });\n      }\n    }\n  }]);\n\n  return LoginPage;\n}(React.Component);\n\nexport default LoginPage;","map":{"version":3,"sources":["/Users/matthewpugh/Projects/family-context-ui/src/pages/LoginPage.tsx"],"names":["React","TextInputGroup","PasswordInputGroup","LoginWarning","LoginStatus","ErrorMessage","Urls","LoginPage","props","state","loginStatus","Unknown","userid","password","validationError","event","tryLogin","text","setState","Unauthenticated","Forbidden","Links","LoginHelp","formEvent","preventDefault","client","login","then","status","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { TextInputGroup, PasswordInputGroup } from '../components/InputGroups'\nimport LoginDetails from '../models/LoginDetails';\nimport ApiClient from '../clients/ApiClient';\nimport LoginWarning from '../components/LoginWarning';\nimport LoginStatus from '../models/LoginStatus';\nimport ErrorMessage from '../components/ErrorMessage';\nimport { Urls } from '../tools/ConfigurableContent';\n\ninterface LoginProps extends RouteComponentProps {\n  client: ApiClient\n}\n\ninterface LoginState extends LoginDetails {\n  loginStatus: LoginStatus,\n  validationError: boolean\n}\n\nclass LoginPage extends React.Component<LoginProps, LoginState>  {\n\n  constructor(props: LoginProps) {\n    super(props);\n    this.state = { loginStatus: LoginStatus.Unknown, userid: \"\", password: \"\", validationError: false };\n  }\n\n\n  render() {\n    return (\n      <form \n        className={\"LoginPage \" + (this.state.validationError ? \"govuk-form-group--error\" : \"\")} \n        onSubmit={(event) => this.tryLogin(event)}\n      >\n        <ErrorMessage hidden={!this.state.validationError}>Enter your username and password</ErrorMessage>\n        <TextInputGroup \n          onChange={(text: string) => this.setState({ ...this.state, userid: text })} \n          id=\"username\" name=\"Username\" \n          format={\"govuk-!-width-one-quarter \" + (this.state.validationError ? \"govuk-input--error\" : \"\")} \n        />\n        <PasswordInputGroup \n          onChange={(text: string) => this.setState({ ...this.state, password: text })} \n          format={this.state.validationError ? \"govuk-input--error\" : \"\"}\n        />\n        <LoginWarning show={this.state.loginStatus === LoginStatus.Unauthenticated}>Username or password is incorrect</LoginWarning>\n        <LoginWarning show={this.state.loginStatus === LoginStatus.Forbidden}>You’re not permitted to login. Please talk to an administrator</LoginWarning>\n        <button className=\"govuk-button\" data-module=\"govuk-button\" >\n          Start session\n        </button>\n        <p>\n        {Urls.Links.LoginHelp ?\n          <a href={Urls.Links.LoginHelp} rel=\"noopener noreferrer\" target=\"_blank\">I need help signing in</a>\n          : <></>\n        }\n        </p>\n        \n      </form>\n    );\n  }\n\n  tryLogin(formEvent: React.FormEvent<HTMLFormElement>): void {\n    formEvent.preventDefault()\n    if (this.state.userid == \"\" || this.state.password == \"\") {\n      this.setState({...this.state, validationError: true})\n    } else {\n      this.setState({...this.state, validationError: false})\n      this.props.client.login(this.state).then((status: LoginStatus) => this.setState({...this.state, loginStatus: status}));\n    }\n  }\n}\n\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}